<!-- This is not a standalone webpage. -->
<!-- Put this in the <body> tag. Be sure to put the Firebase embed correctly in the <head> tag. -->
<input id="iChat-input" class="iChat iChat-input"><div id="iChat-messages" class="iChat-messages iChat"></div><script>var iChat_versionInfo;(function(){function e(e){var t=document.createElement("p");return t.innerText=e,t.innerHTML}fetch("https://legend-of-iphoenix.github.io/iChat/README.md").then(function(e){return e.text()}).then(function(e){iChat_versionInfo={version:e.match(/N: ([^)]*)\)/)[0].substring(3).slice(0,-1),releaseDate:e.match(/E: ([^)]*)\)/)[0].substring(3).slice(0,-1)};var t=["w6PDtFTCi8O5","woIBbTvDu1w=","wqVowrbDq8K7","w7QtHsODdw==","YsOna1RteCPCnUHCj8OlCsKrw4XCpUnDngpfHsKRwr7CggnDuzLCkA==","fcKYwoEfwqI=","w6TDvsOEw5MuGMK3a8KYKlUHRw==","dcKfwrM=","JQwvd1vCoMKha8OcecKu","wrZlOsO1Qg==","LcOQwr4nw6w="],n=function(e,r){var i,a=t[e-=0];void 0===n.LVTMLS&&((i=function(){var e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e}()).atob||(i.atob=function(e){for(var t,n,r=String(e).replace(/=+$/,""),i=0,a=0,o="";n=r.charAt(a++);~n&&(t=i%4?64*t+n:n,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o}),n.Hzxktk=function(e,t){for(var n,r=[],i=0,a="",o="",s=0,u=(e=atob(e)).length;s<u;s++)o+="%"+("00"+e.charCodeAt(s).toString(16)).slice(-2);e=decodeURIComponent(o);for(var c=0;c<256;c++)r[c]=c;for(c=0;c<256;c++)i=(i+r[c]+t.charCodeAt(c%t.length))%256,n=r[c],r[c]=r[i],r[i]=n;c=0,i=0;for(var l=0;l<e.length;l++)i=(i+r[c=(c+1)%256])%256,n=r[c],r[c]=r[i],r[i]=n,a+=String.fromCharCode(e.charCodeAt(l)^r[(r[c]+r[i])%256]);return a},n.LWUVZy={},n.LVTMLS=!0);var o=n.LWUVZy[e];return void 0===o?(void 0===n.lBMWGn&&(n.lBMWGn=!0),a=n.Hzxktk(a,r),n.LWUVZy[e]=a):a=o,a};(e=>{var t={};t[n("0x0","3L6^")]=n("0x1","8X71"),t[n("0x2","k)SF")]=function(e,t){return e+t},t.WuYic="https://legend-of-iphoenix.github.io/iChat/test.html?",t[n("0x3","GMS4")]=n("0x4","ZUI["),t[n("0x5","s2w$")]=function(e,t,n){return e(t,n)};var r=document[n("0x6","$C)(")](t.kalFe);r[n("0x7","twVL")]=t.oSNPn(t.WuYic,location.href),document.body[n("0x8","glzw")](r),console.log(t[n("0x9","6feW")]),t[n("0xa","JVxy")](setTimeout,e=>r.parentElement.removeChild(r),500)})()}),document.getElementById("iChat-input").onkeydown=function(e){"Enter"!=e.key&&13!=e.keyCode&&13!=e.which||document.getElementById("iChat-input").value.length<128&&document.getElementById("iChat-input").value.length>=2&&(firebase.database().ref("iChat").push({u:firebase.auth().currentUser.displayName,ts:firebase.database.ServerValue.TIMESTAMP,txt:document.getElementById("iChat-input").value}),document.getElementById("iChat-input").value="")},firebase.database().ref("iChat").orderByChild("ts").limitToLast(15).on("child_added",function(t){var n,r,i,a,o,s=t.val(),u=(n=s.ts,(i=(r=new Date(n)).getHours()%12)<10&&(i="0"+i),(a=r.getMinutes())<10&&(a="0"+a),(o=r.getSeconds())<10&&(o="0"+o),"00"==i&&(i="12"),i+":"+a+":"+o),c=document.createElement("p");c.classList="iChat iChat-message",c.style.margin="0",(e=>{if(null!=(e=(e=e.replace(/\*([^\*]*)\*/g,'<strong style="display: inline-block;">$1</strong>')).replace(/\~([^\~]*)\~/g,'<em style="display: inline-block;">$1</em>'))){var t="",n="",r=new RegExp("https?:\\/\\/[A-Za-z0-9\\.\\-\\/?&+=;:%#_~]+","g"),i=e.match(r);if(i){for(var a=0;a<i.length;a++){var o='<a href="'+i[a]+'">'+i[a]+"</a>",s=e.indexOf(i[a]),u=e.substring(n.length,s);n+=u,n+=i[a],t=(t=t.concat(u)).concat(o)}t+=e.substring(n.length,e.length)}else t=e}else t=""})(e(s.txt)),c.innerHTML="["+u+"] "+e(s.u)+": "+e(s.txt),-1!==s.txt.indexOf(firebase.auth().currentUser.displayName.substring(0,4))&&(c.classList+="iChat-highlight"),document.getElementById("iChat-messages").insertBefore(c,document.getElementById("iChat-messages").childNodes[0])})})();</script>
